{{define "users.tmpl"}}
    {{template "base" .}}
{{end}}

{{define "content"}}
    <section class="card">
        <h1 class="card-title">Users</h1>

        <div class="form-row inline" style="align-items:center; gap:12px;">
            <div style="font-weight:700;">Total: <span id="total-count">—</span></div>
            <label style="flex:1;">
                Search phone:
                <input id="search-input" type="text" placeholder="enter phone or part of it">
            </label>
            <label>
                Per page:
                <select id="limit-select">
                    <option value="10">10</option>
                    <option value="20" selected>20</option>
                    <option value="50">50</option>
                </select>
            </label>
            <button id="search-btn" class="btn">Search</button>
        </div>

        <div id="users-output" class="form-output" style="margin-top:8px;"></div>

        <div id="users-list" style="margin-top:12px;"></div>

        <div id="pagination" class="form-row center" style="margin-top:12px; gap:8px;">
            <button id="prev-page" class="btn">Prev</button>
            <div style="font-weight:700;">Page <span id="current-page">1</span> / <span id="total-pages">1</span></div>
            <button id="next-page" class="btn">Next</button>
        </div>
    </section>

    <!-- Modal -->
    <div id="user-modal" class="card hidden" style="position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); z-index:200; width:90%; max-width:720px;">
        <h2 class="card-title">User details</h2>

        <div id="modal-content">
            <div id="tabs" style="display:flex; gap:12px; margin-bottom:12px;">
                <button id="tab-resident" class="btn hidden">Resident</button>
                <button id="tab-staff" class="btn hidden">Staff</button>
            </div>

            <div id="resident-panel" class="hidden">
                <div><strong>Resident ID:</strong> <span id="res-id">—</span></div>
                <div><strong>Phone:</strong> <span id="res-phone">—</span></div>
                <div><strong>Full name:</strong> <span id="res-fullname">—</span></div>

                <div style="margin-top:8px;">
                    <button id="btn-get-houses" class="btn">Get houses</button>
                    <div id="houses-list" style="margin-top:8px;"></div>
                </div>
            </div>

            <div id="staff-panel" class="hidden">
                <div><strong>Staff ID:</strong> <span id="staff-id">—</span></div>
                <div><strong>Phone:</strong> <span id="staff-phone">—</span></div>
                <div><strong>Full name:</strong> <span id="staff-fullname">—</span></div>
                <div><strong>Status:</strong> <span id="staff-status">—</span></div>

                <div style="margin-top:8px;">
                    <button id="btn-get-specs" class="btn">Get specializations</button>
                    <div id="specs-list" style="margin-top:8px;"></div>
                </div>
            </div>
        </div>

        <div style="margin-top:12px;">
            <button id="modal-close" class="btn">Close</button>
        </div>
        <output id="modal-output" class="form-output" aria-live="polite" style="margin-top:8px;"></output>
    </div>

    <script src="/static/js/users.js"></script>
{{end}}